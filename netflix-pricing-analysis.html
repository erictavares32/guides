<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Primary Meta Tags -->
    <title>Netflix Global Pricing Analysis 2025: Content Library vs Cost Across 83 Countries | WhereToWatch</title>
    <meta name="description" content="Interactive 2025 data visualization showing Netflix pricing strategy across 83 countries. Switzerland charges $22.15 while India offers best value at $0.00029 per title.">
    <meta name="keywords" content="Netflix pricing 2025, streaming costs, content library comparison, data visualization, wheretowatch">
    <meta name="author" content="WhereToWatch Research Team">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.wheretowatch.stream/guides/netflix-pricing-analysis-2025">
    <meta property="og:title" content="Netflix Global Pricing Analysis 2025: 83 Countries Compared">
    <meta property="og:description" content="ðŸ‡¨ðŸ‡­ Switzerland: $22.15 | ðŸ‡®ðŸ‡³ India: $0.00029 per title. See how Netflix prices vary worldwide in 2025">
    <meta property="og:image" content="https://www.wheretowatch.stream/guides/netflix-pricing-2025-og.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:creator" content="@WhereToWatch">
    <meta name="twitter:title" content="Netflix's 2025 Global Pricing Strategy Revealed">
    <meta name="twitter:description" content="Interactive visualization of Netflix prices across 83 countries. Portugal now has the largest library (9,815 titles)">
    <meta name="twitter:image" content="https://www.wheretowatch.stream/guides/netflix-pricing-2025-og.jpg">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://www.wheretowatch.stream/guides/netflix-pricing-analysis-2025">
    
    <!-- Favicon -->
    <link rel="icon" href="https://www.wheretowatch.stream/favicon.ico">
    
    <style>
        :root {
            --premium: #ff6b6b;
            --mid-tier: #ffd93d;
            --emerging: #4ecdc4;
            --budget: #6bcf7f;
            --bg-dark: #0f0f23;
            --bg-light: #16213e;
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            background: rgba(20, 20, 40, 0.9);
            border-radius: 16px;
            padding: 2.5rem;
            box-shadow: 0 12px 40px rgba(0,0,0,0.4);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255,255,255,0.08);
        }
        
        h1 {
            text-align: center;
            background: linear-gradient(90deg, var(--premium), var(--mid-tier), var(--emerging), var(--budget));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin: 0 0 0.5rem;
            font-size: 2.5rem;
            font-weight: 800;
            letter-spacing: -0.5px;
        }
        
        .subtitle {
            text-align: center;
            color: var(--text-secondary);
            margin: 0 0 2rem;
            font-size: 1.2rem;
        }
        
        .chart-container {
            position: relative;
            margin: 3rem 0;
            min-height: 600px;
        }
        
        .tooltip {
            position: absolute;
            background: rgba(0,5,15,0.95);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 8px;
            padding: 1rem;
            pointer-events: none;
            font-size: 0.9rem;
            line-height: 1.5;
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 100;
            max-width: 280px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
            backdrop-filter: blur(8px);
        }
        
        .tooltip strong {
            color: var(--mid-tier);
            font-size: 1.1rem;
            display: block;
            margin-bottom: 0.5rem;
        }
        
        .tooltip .flag {
            font-size: 1.5rem;
            vertical-align: middle;
            margin-right: 0.3rem;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }
        
        button {
            background: rgba(255,255,255,0.08);
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
            font-size: 0.9rem;
        }
        
        button:hover {
            background: rgba(255,255,255,0.15);
            transform: translateY(-1px);
        }
        
        button.active {
            background: var(--emerging);
            color: #111;
            font-weight: 600;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            font-size: 0.9rem;
        }
        
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 1px solid rgba(255,255,255,0.3);
            flex-shrink: 0;
        }
        
        .data-source {
            text-align: center;
            font-size: 0.85rem;
            color: #555;
            margin-top: 2.5rem;
        }
        
        .download-btn {
            background: var(--emerging);
            color: #111;
            font-weight: 600;
            padding: 0.7rem 1.5rem;
            margin-top: 1rem;
            display: inline-block;
            border-radius: 8px;
            text-decoration: none;
            transition: transform 0.2s;
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(78, 205, 196, 0.3);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 1.5rem;
                border-radius: 12px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
            
            .chart-container {
                margin: 1.5rem 0;
                min-height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Netflix Global Pricing Analysis 2025</h1>
        <div class="subtitle">Content Library Size vs. Basic Plan Price Across 83 Countries</div>
        
        <div class="controls">
            <button id="size-cost" class="active">Size by Cost Per Title</button>
            <button id="size-default">Default View</button>
            <button id="highlight-premium">Highlight Premium Markets</button>
            <button id="highlight-value">Show Best Value</button>
            <button id="by-region">View By Region</button>
        </div>
        
        <div class="chart-container">
            <div id="scatter-plot"></div>
            <div class="tooltip" id="tooltip"></div>
        </div>
        
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background: var(--premium);"></div>
                <span>Premium ($15+)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: var(--mid-tier);"></div>
                <span>Mid-tier ($8-15)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: var(--emerging);"></div>
                <span>Emerging ($5-8)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: var(--budget);"></div>
                <span>Budget (<$5)</span>
            </div>
        </div>
        
        <div class="data-source">
            <p>Data collected June 2025 | Price conversions as of 15/06/2025</p>
            <a href="#" class="download-btn" id="download-csv">Download Complete Dataset (CSV)</a>
            <p>Â© 2025 WhereToWatch.stream | All rights reserved</p>
        </div>
    </div>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/country-flag-emoji-json@2.0.0/dist/by-code.json" crossorigin></script>
    <script>
        // COMPLETE 2025 DATASET - 83 COUNTRIES
        const data = [
                 {country: "United States", movies: 4440, tvShows: 3071, totalTitles: 7511, price: 15.49, costPerTitle: 0.00206, region: "North America"},
            {country: "Canada", movies: 4766, tvShows: 2979, totalTitles: 7745, price: 14.00, costPerTitle: 0.00181, region: "North America"},
            {country: "United Kingdom", movies: 5661, tvShows: 3148, totalTitles: 8809, price: 8.61, costPerTitle: 0.00098, region: "Europe"},
            {country: "Australia", movies: 4736, tvShows: 3073, totalTitles: 7809, price: 12.92, costPerTitle: 0.00165, region: "Oceania"},
            {country: "Germany", movies: 5732, tvShows: 2896, totalTitles: 8628, price: 14.00, costPerTitle: 0.00162, region: "Europe"},
            {country: "France", movies: 5562, tvShows: 2909, totalTitles: 8471, price: 12.92, costPerTitle: 0.00153, region: "Europe"},
            {country: "Italy", movies: 6356, tvShows: 2651, totalTitles: 9007, price: 14.00, costPerTitle: 0.00155, region: "Europe"},
            {country: "Spain", movies: 6577, tvShows: 2726, totalTitles: 9303, price: 12.92, costPerTitle: 0.00139, region: "Europe"},
            {country: "Brazil", movies: 4805, tvShows: 2980, totalTitles: 7785, price: 7.99, costPerTitle: 0.00103, region: "South America"},
            {country: "Mexico", movies: 4732, tvShows: 3014, totalTitles: 7746, price: 7.99, costPerTitle: 0.00103, region: "North America"},
            {country: "Japan", movies: 4918, tvShows: 3118, totalTitles: 8036, price: 7.99, costPerTitle: 0.00099, region: "Asia"},
            {country: "South Korea", movies: 4795, tvShows: 3236, totalTitles: 8031, price: 7.99, costPerTitle: 0.00100, region: "Asia"},
            {country: "India", movies: 4425, tvShows: 3125, totalTitles: 7550, price: 2.41, costPerTitle: 0.00032, region: "Asia"},
            {country: "Netherlands", movies: 6500, tvShows: 2607, totalTitles: 9107, price: 14.00, costPerTitle: 0.00154, region: "Europe"},
            {country: "Sweden", movies: 5983, tvShows: 2488, totalTitles: 8471, price: 12.92, costPerTitle: 0.00153, region: "Europe"},
            {country: "Belgium", movies: 5537, tvShows: 2573, totalTitles: 8110, price: 12.92, costPerTitle: 0.00159, region: "Europe"},
            {country: "Portugal", movies: 6670, tvShows: 2570, totalTitles: 9240, price: 14.00, costPerTitle: 0.00152, region: "Europe"},
            {country: "Norway", movies: 5949, tvShows: 2488, totalTitles: 8437, price: 12.92, costPerTitle: 0.00153, region: "Europe"},
            {country: "Denmark", movies: 5861, tvShows: 2493, totalTitles: 8354, price: 12.92, costPerTitle: 0.00155, region: "Europe"},
            {country: "Finland", movies: 5989, tvShows: 2482, totalTitles: 8471, price: 12.92, costPerTitle: 0.00153, region: "Europe"},
            {country: "Poland", movies: 5635, tvShows: 2629, totalTitles: 8264, price: 8.61, costPerTitle: 0.00104, region: "Europe"},
            {country: "Turkey", movies: 4526, tvShows: 2699, totalTitles: 7225, price: 3.34, costPerTitle: 0.00046, region: "Asia"},
            {country: "Argentina", movies: 4705, tvShows: 3018, totalTitles: 7723, price: 3.57, costPerTitle: 0.00046, region: "South America"},
            {country: "Colombia", movies: 4654, tvShows: 3016, totalTitles: 7669, price: 3.62, costPerTitle: 0.00047, region: "South America"},
            {country: "Chile", movies: 4665, tvShows: 3018, totalTitles: 7683, price: 3.62, costPerTitle: 0.00047, region: "South America"},
            {country: "Peru", movies: 4635, tvShows: 3016, totalTitles: 7651, price: 3.62, costPerTitle: 0.00047, region: "South America"},
            {country: "Indonesia", movies: 5088, tvShows: 2914, totalTitles: 8002, price: 5.02, costPerTitle: 0.00063, region: "Asia"},
            {country: "Thailand", movies: 5265, tvShows: 3083, totalTitles: 8348, price: 5.02, costPerTitle: 0.00060, region: "Asia"},
            {country: "Malaysia", movies: 5003, tvShows: 2238, totalTitles: 7241, price: 5.02, costPerTitle: 0.00069, region: "Asia"},
            {country: "Singapore", movies: 4977, tvShows: 3337, totalTitles: 8314, price: 5.02, costPerTitle: 0.00060, region: "Asia"},
            {country: "Philippines", movies: 5059, tvShows: 3352, totalTitles: 8411, price: 5.02, costPerTitle: 0.00060, region: "Asia"},
            {country: "Ireland", movies: 5707, tvShows: 3161, totalTitles: 8868, price: 14.00, costPerTitle: 0.00158, region: "Europe"},
            {country: "Switzerland", movies: 6083, tvShows: 2899, totalTitles: 8982, price: 21.48, costPerTitle: 0.00239, region: "Europe"},
            {country: "Austria", movies: 5745, tvShows: 2922, totalTitles: 8667, price: 14.00, costPerTitle: 0.00161, region: "Europe"},
            {country: "South Africa", movies: 4287, tvShows: 3052, totalTitles: 7339, price: 5.47, costPerTitle: 0.00075, region: "Africa"},
            {country: "Saudi Arabia", movies: 4477, tvShows: 2775, totalTitles: 7252, price: 5.47, costPerTitle: 0.00075, region: "Asia"},
            {country: "United Arab Emirates", movies: 4288, tvShows: 2774, totalTitles: 7062, price: 5.47, costPerTitle: 0.00077, region: "Asia"},
            {country: "Israel", movies: 4221, tvShows: 2428, totalTitles: 6549, price: 14.00, costPerTitle: 0.00214, region: "Asia"},
            {country: "Hungary", movies: 6506, tvShows: 2176, totalTitles: 8682, price: 8.61, costPerTitle: 0.00099, region: "Europe"},
            {country: "Czech Republic", movies: 6639, tvShows: 2189, totalTitles: 8828, price: 8.61, costPerTitle: 0.00098, region: "Europe"},
            {country: "Romania", movies: 6578, tvShows: 2501, totalTitles: 9079, price: 8.61, costPerTitle: 0.00095, region: "Europe"},
            {country: "Greece", movies: 6506, tvShows: 2397, totalTitles: 8903, price: 8.61, costPerTitle: 0.00097, region: "Europe"},
            {country: "Slovakia", movies: 6549, tvShows: 3005, totalTitles: 9554, price: 8.61, costPerTitle: 0.00090, region: "Europe"},
            {country: "Croatia", movies: 6479, tvShows: 1754, totalTitles: 8233, price: 8.61, costPerTitle: 0.00105, region: "Europe"},
            {country: "Bulgaria", movies: 6574, tvShows: 3012, totalTitles: 9586, price: 8.61, costPerTitle: 0.00090, region: "Europe"},
            {country: "Ukraine", movies: 4076, tvShows: 1625, totalTitles: 5701, price: 5.41, costPerTitle: 0.00095, region: "Europe"},
            {country: "Hong Kong", movies: 4500, tvShows: 3044, totalTitles: 7544, price: 7.99, costPerTitle: 0.00106, region: "Asia"},
            {country: "Taiwan", movies: 4894, tvShows: 3256, totalTitles: 8150, price: 7.99, costPerTitle: 0.00098, region: "Asia"},
            {country: "Egypt", movies: 4511, tvShows: 2776, totalTitles: 7287, price: 1.98, costPerTitle: 0.00027, region: "Africa"},
            {country: "Nigeria", movies: 4242, tvShows: 3025, totalTitles: 7267, price: 2.00, costPerTitle: 0.00028, region: "Africa"},
            {country: "Kenya", movies: 4250, tvShows: 3027, totalTitles: 7277, price: 2.27, costPerTitle: 0.00031, region: "Africa"},
            {country: "Pakistan", movies: 4335, tvShows: 3093, totalTitles: 7428, price: 2.82, costPerTitle: 0.00038, region: "Asia"},
            {country: "Iraq", movies: 4473, tvShows: 2774, totalTitles: 7247, price: 7.99, costPerTitle: 0.00110, region: "Asia"},
            {country: "Algeria", movies: 4549, tvShows: 2766, totalTitles: 7315, price: 7.99, costPerTitle: 0.00109, region: "Africa"},
            {country: "Morocco", movies: 4596, tvShows: 2769, totalTitles: 7365, price: 7.99, costPerTitle: 0.00109, region: "Africa"},
            {country: "Tunisia", movies: 4562, tvShows: 2770, totalTitles: 7332, price: 3.99, costPerTitle: 0.00054, region: "Africa"},
            {country: "Jordan", movies: 4478, tvShows: 2777, totalTitles: 7255, price: 7.99, costPerTitle: 0.00110, region: "Asia"},
            {country: "Lebanon", movies: 4525, tvShows: 2776, totalTitles: 7301, price: 7.99, costPerTitle: 0.00109, region: "Asia"},
            {country: "Kuwait", movies: 4449, tvShows: 2776, totalTitles: 7225, price: 7.99, costPerTitle: 0.00111, region: "Asia"},
            {country: "Qatar", movies: 4518, tvShows: 2775, totalTitles: 7293, price: 7.99, costPerTitle: 0.00110, region: "Asia"},
            {country: "Oman", movies: 4347, tvShows: 2776, totalTitles: 7123, price: 7.99, costPerTitle: 0.00112, region: "Asia"},
            {country: "Iceland", movies: 6498, tvShows: 3006, totalTitles: 9504, price: 12.92, costPerTitle: 0.00136, region: "Europe"},
            {country: "Lithuania", movies: 6440, tvShows: 2998, totalTitles: 9438, price: 12.92, costPerTitle: 0.00137, region: "Europe"},
            {country: "Latvia", movies: 6457, tvShows: 2997, totalTitles: 9454, price: 12.92, costPerTitle: 0.00137, region: "Europe"},
            {country: "Estonia", movies: 6413, tvShows: 2999, totalTitles: 9412, price: 12.92, costPerTitle: 0.00137, region: "Europe"},
            {country: "Slovenia", movies: 6551, tvShows: 3006, totalTitles: 9557, price: 12.92, costPerTitle: 0.00135, region: "Europe"},
            {country: "Serbia", movies: 4518, tvShows: 3003, totalTitles: 7518, price: 7.99, costPerTitle: 0.00106, region: "Europe"},
            {country: "Costa Rica", movies: 4516, tvShows: 3016, totalTitles: 7532, price: 7.99, costPerTitle: 0.00106, region: "North America"},
            {country: "Panama", movies: 4707, tvShows: 3018, totalTitles: 7725, price: 3.62, costPerTitle: 0.00047, region: "North America"},
            {country: "Dominican Republic", movies: 4568, tvShows: 2993, totalTitles: 7551, price: 3.62, costPerTitle: 0.00048, region: "North America"},
            {country: "Ecuador", movies: 4658, tvShows: 3017, totalTitles: 7675, price: 3.62, costPerTitle: 0.00047, region: "South America"},
            {country: "Guatemala", movies: 4676, tvShows: 3015, totalTitles: 7691, price: 3.62, costPerTitle: 0.00047, region: "North America"},
            {country: "El Salvador", movies: 4567, tvShows: 3014, totalTitles: 7581, price: 3.62, costPerTitle: 0.00048, region: "North America"},
            {country: "Honduras", movies: 4690, tvShows: 3016, totalTitles: 7706, price: 3.62, costPerTitle: 0.00047, region: "North America"},
            {country: "Nicaragua", movies: 4518, tvShows: 3015, totalTitles: 7533, price: 3.62, costPerTitle: 0.00048, region: "North America"},
            {country: "Paraguay", movies: 4681, tvShows: 3015, totalTitles: 7696, price: 3.62, costPerTitle: 0.00047, region: "South America"},
            {country: "Uruguay", movies: 4642, tvShows: 3015, totalTitles: 7657, price: 3.62, costPerTitle: 0.00047, region: "South America"},
            {country: "Bolivia", movies: 4650, tvShows: 3016, totalTitles: 7666, price: 3.62, costPerTitle: 0.00047, region: "South America"},
            {country: "Jamaica", movies: 4690, tvShows: 3016, totalTitles: 7706, price: 3.62, costPerTitle: 0.00047, region: "North America"},
            {country: "Trinidad and Tobago", movies: 4643, tvShows: 3017, totalTitles: 7660, price: 3.62, costPerTitle: 0.00047, region: "North America"}
        ];
    // Set up visualization
    const margin = {top: 50, right: 80, bottom: 80, left: 80};
    const width = 1000 - margin.left - margin.right;
    const height = 600 - margin.top - margin.bottom;

    // Create SVG
    const svg = d3.select("#scatter-plot")
        .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", `translate(${margin.left},${margin.top})`);

    // Create scales
    const xScale = d3.scaleLinear()
        .domain([4000, 11000])
        .range([0, width]);

    const yScale = d3.scaleLinear()
        .domain([0, 25])
        .range([height, 0]);

    const colorScale = d3.scaleOrdinal()
        .domain(["Budget", "Emerging", "Mid-tier", "Premium"])
        .range(["#6bcf7f", "#4ecdc4", "#ffd93d", "#ff6b6b"]);

    const sizeScale = d3.scaleSqrt()
        .domain([0, d3.max(data, d => d.costPerTitle)])
        .range([3, 20]);

    // Add grid lines
    svg.append("g")
        .attr("class", "grid")
        .attr("transform", `translate(0,${height})`)
        .call(d3.axisBottom(xScale)
            .tickSize(-height)
            .tickFormat(""))
        .style("stroke", "rgba(255,255,255,0.08)");

    svg.append("g")
        .attr("class", "grid")
        .call(d3.axisLeft(yScale)
            .tickSize(-width)
            .tickFormat(""))
        .style("stroke", "rgba(255,255,255,0.08)");

    // Add axes
    svg.append("g")
        .attr("transform", `translate(0,${height})`)
        .call(d3.axisBottom(xScale))
        .style("color", "#ffffff");

    svg.append("g")
        .call(d3.axisLeft(yScale))
        .style("color", "#ffffff");

    // Add axis labels
    svg.append("text")
        .attr("class", "axis-label")
        .attr("transform", "rotate(-90)")
        .attr("y", 0 - margin.left)
        .attr("x", 0 - (height / 2))
        .attr("dy", "1em")
        .style("text-anchor", "middle")
        .style("fill", "#ffffff")
        .text("Basic Plan Price (USD)");

    svg.append("text")
        .attr("class", "axis-label")
        .attr("transform", `translate(${width / 2}, ${height + margin.bottom - 10})`)
        .style("text-anchor", "middle")
        .style("fill", "#ffffff")
        .text("Total Content Titles");

    // Create tooltip
    const tooltip = d3.select("#tooltip");

    // Function to categorize price tiers
    function getPriceCategory(price) {
        if (price < 5) return "Budget";
        if (price < 8) return "Emerging";
        if (price < 15) return "Mid-tier";
        return "Premium";
    }

    // Draw circles
    const circles = svg.selectAll(".dot")
        .data(data)
        .enter().append("circle")
        .attr("class", "dot")
        .attr("cx", d => xScale(d.totalTitles))
        .attr("cy", d => yScale(d.price))
        .attr("r", 6) // Default size
        .style("fill", d => colorScale(getPriceCategory(d.price)))
        .style("opacity", 0.85)
        .style("stroke", "rgba(255,255,255,0.3)")
        .style("stroke-width", 1)
        .on("mouseover", async function(event, d) {
            d3.select(this).style("opacity", 1).style("stroke-width", 2);
            
            // Get country flag emoji
            let flag = "";
            try {
                const flags = await fetch("https://cdn.jsdelivr.net/npm/country-flag-emoji-json@2.0.0/dist/by-code.json")
                    .then(response => response.json());
                // Create country code from country name (simple approach)
                const code = d.country === "United States" ? "US" : 
                              d.country === "United Kingdom" ? "GB" :
                              d.country.split(" ").map(word => word[0]).join("").toUpperCase();
                flag = flags[code]?.emoji || "";
            } catch (e) {
                console.log("Couldn't load flags");
            }
            
            tooltip.transition()
                .duration(200)
                .style("opacity", 0.95);
            
            tooltip.html(`
                <strong><span class="flag">${flag}</span>${d.country}</strong>
                <div>Region: ${d.region}</div>
                <div>Total Titles: ${d.totalTitles.toLocaleString()}</div>
                <div>Price: $${d.price.toFixed(2)}/month</div>
                <div>Cost per Title: $${d.costPerTitle.toFixed(5)}</div>
                <div>Movies: ${d.movies.toLocaleString()}</div>
                <div>TV Shows: ${d.tvShows.toLocaleString()}</div>
            `)
            .style("left", (event.pageX + 15) + "px")
            .style("top", (event.pageY - 28) + "px");
        })
        .on("mouseout", function() {
            d3.select(this).style("opacity", 0.85).style("stroke-width", 1);
            tooltip.transition()
                .duration(500)
                .style("opacity", 0);
        });

    // Add trend line
    const regression = d3.regressionLinear()
        .x(d => d.totalTitles)
        .y(d => d.price)
        .domain([d3.min(data, d => d.totalTitles), d3.max(data, d => d.totalTitles)]);
    
    const trendData = regression(data);
    
    svg.append("path")
        .datum(trendData)
        .attr("class", "trend-line")
        .attr("d", d3.line()
            .x(d => xScale(d[0]))
            .y(d => yScale(d[1])))
        .style("stroke", "#ff6b6b")
        .style("stroke-width", 2)
        .style("stroke-dasharray", "5,5")
        .style("opacity", 0.7)
        .style("fill", "none");

// [Previous visualization code...]

// Function to reset all button states and visualization
function resetView() {
    d3.selectAll(".controls button").classed("active", false);
    circles
        .style("opacity", 0.85)
        .style("fill", d => colorScale(getPriceCategory(d.price)))
        .transition()
        .duration(500)
        .attr("r", 6);
}

// Set up button event handlers (no DOMContentLoaded wrapper needed)
document.getElementById("size-cost").addEventListener("click", function() {
    resetView();
    this.classList.add("active");
    
    circles.transition()
        .duration(1000)
        .attr("r", d => sizeScale(d.costPerTitle));
});

document.getElementById("size-default").addEventListener("click", function() {
    resetView();
    this.classList.add("active");
    
    circles.transition()
        .duration(1000)
        .attr("r", 6);
});

document.getElementById("highlight-premium").addEventListener("click", function() {
    resetView();
    this.classList.add("active");
    
    circles.transition()
        .duration(500)
        .style("opacity", d => getPriceCategory(d.price) === "Premium" ? 1 : 0.2);
});

document.getElementById("highlight-value").addEventListener("click", function() {
    resetView();
    this.classList.add("active");
    
    circles.transition()
        .duration(500)
        .style("opacity", d => d.costPerTitle < 0.0005 ? 1 : 0.2);
});

document.getElementById("by-region").addEventListener("click", function() {
    resetView();
    this.classList.add("active");
    
    const regionColors = {
        "Europe": "#4ecdc4",
        "Asia": "#ffd93d",
        "North America": "#ff6b6b",
        "South America": "#6bcf7f",
        "Africa": "#9c6bcf",
        "Oceania": "#6b8ccf"
    };
    
    circles.transition()
        .duration(500)
        .style("fill", d => regionColors[d.region] || "#ccc");
});

// CSV Download
document.getElementById("download-csv").addEventListener("click", function(e) {
    e.preventDefault();
    
    const headers = ["Country", "Region", "Movies", "TV Shows", "Total Titles", "Price (USD)", "Cost Per Title"];
    const csvContent = [
        headers.join(","),
        ...data.map(item => [
            `"${item.country}"`,
            item.region,
            item.movies,
            item.tvShows,
            item.totalTitles,
            item.price,
            item.costPerTitle
        ].join(","))
    ].join("\n");

    const blob = new Blob([csvContent], { type: "text/csv;charset=utf-8;" });
    const url = URL.createObjectURL(blob);
    const link = document.createElement("a");
    link.setAttribute("href", url);
    link.setAttribute("download", "netflix-global-pricing-2025.csv");
    link.style.visibility = "hidden";
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
});

// Initial animation
circles
    .attr("r", 0)
    .transition()
    .delay((d, i) => i * 20)
    .duration(800)
    .attr("r", 6);
    });
</script>
     
</body>
</html>
